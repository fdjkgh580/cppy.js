{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/jquery.cppy.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","e","$","global_org_template","global_isinit","global_selector","cppy","append","version","param","_cppy","_deep_key","this","prepare_data","data","obj","each","ele","type","_deep_is_val","list","info","delete_key","_deep_key_name","_deep","rowkey","row","box","_deep_key_clone","cellkey","cell","_deep_each_row","extend","flatten","datalist","lkey","datainfo","template","_is_init","clone","timestamp","Date","getTime","cppy_class","attr","template_html","outerHTML","boxkey","key2val","html","target","find","element","url","tagName","css","removeAttr","join","code","val","re","RegExp","replace","_set_init","bool","put","newcode","after","first","remove","last","_display_cppy_result_template","selector","main","length","input_data","temp","success","fn","jQuery"],"mappings":"aACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,KACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,KAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GAA0CK,cAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,YAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,cAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA2B,SAC3B,WAAiC,OAAA3B,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAkB,EAAAC,GAAsD,OAAAlB,OAAAmB,UAAAC,eAAA3B,KAAAwB,EAAAC,IAGtDhC,EAAAmC,EAAA,GAIAnC,IAAAoC,EAAA,cAAAd,EAAAe,EAAAR,GAAA,cClFC,SAAUS,GAEP,IACIC,KACAC,KACAC,KACJH,EAAEI,QAGFJ,EAAE,QAAQK,OAAO,iDAGjBL,EAAEI,KAAKE,QAAU,WACb,MAX2B,SAe/BN,EAAEI,KAAKhB,OAAS,SAAUmB,GAEtB,IAAIC,EAGAC,EAMJC,KAAKC,aAAe,SAAUC,GAC1B,IAAIC,KAYJ,OAXAb,EAAEc,KAAKF,EAAM,SAAUvB,EAAK0B,GASxB,MAPoB,WAAhBf,EAAEgB,KAAKD,GACPF,EAAMD,EAINC,EAAI,GAAKD,OAIVC,GAGX,IAqDII,EAAe,SAAUC,EAAM7B,EAAK8B,EAAMC,GAI1C,OAFAF,EADUG,EAAehC,IACb8B,SACLD,EAAKE,GACLF,GAKPI,EAAQ,SAAUJ,EAAM7B,EAAK8B,GAG7B,MAAqB,WAAjBnB,EAAEgB,KAAKG,GACDF,EAAaC,EAAM7B,EAAK8B,EAAM9B,IAIxCW,EAAEc,KAAKK,EAAM,SAAUI,EAAQC,GAG3B,GAAoB,WAAhBxB,EAAEgB,KAAKQ,GAAmB,CAG1B,IAAIC,EArDK,SAAUF,EAAQC,GAGnC,IAAIE,EAAkBjB,EAiBtB,OAdAA,EAAYY,EAAeE,GAE3BvB,EAAEc,KAAKU,EAAK,SAAUG,EAASC,GAEN,WAAjB5B,EAAEgB,KAAKY,KACPnB,EAAYY,EAAeM,IAG/BH,EAAMF,EAAME,EAAKG,EAASC,KAI9BnB,EAAYiB,EAELF,EAiCWK,CAAeN,EAAQC,UAG1BN,EAAK7B,GAIZW,EAAE8B,OAAOZ,EAAMO,QAMfP,EAAOD,EAAaC,EAAMK,EAAQC,EAAKnC,KAMxC6B,IAIPG,EAAiB,SAAUhD,GAE3B,OAAOoC,EAxHC,IAwHmBpC,GAS/BqC,KAAKqB,QAAU,SAAUC,GAsBrB,OAnBAhC,EAAEc,KAAKkB,EAAU,SAAUC,EAAMC,GAG7BlC,EAAEc,KAAKoB,EAAU,SAAUX,EAAQC,GAG/B,GAAoB,WAAhBxB,EAAEgB,KAAKQ,GAAmB,SAbtCf,EAgBuBc,EAGfW,EAAWZ,EAAMY,EAAUX,EAAQC,OAOpCQ,GAIXtB,KAAKyB,SAAW,SAAUH,GAGtBA,EAAWtB,KAAKqB,QAAQC,QAGpBI,MACAnC,EAAsBD,EAAEG,GAAiBkC,QAAQ,IAGrD,IAAIC,OAAgBC,MAAOC,UACvBC,EAAa,QAAUH,EAE3BtC,EAAEC,GAAqByC,KAAK,kBAAmBD,GAC/C,IAAIE,EAAgB1C,EAAoB2C,UAGpCnB,KACAoB,EAAS,EAWb,OARA7C,EAAEc,KAAKkB,EAAU,SAAU3C,EAAK6C,GAC5BT,EAAIoB,GAAUrC,EAAMsC,QAAQH,EAAeT,GAC3CT,EAAIoB,GA/Ja,SAAUE,GAE/B,IAAIC,EAAShD,EAAE+C,GAiBf,OAfAC,EAAOC,KAAK,0BAA0BnC,KAAK,SAAUzB,EAAK6D,GAEtD,IAAIC,EAAMnD,EAAEkD,GAASR,KAAK,wBAEI,QAA1B1C,EAAEkD,GAAS,GAAGE,QACdpD,EAAEkD,GAASR,KAAK,MAAOS,GAGvBnD,EAAEkD,GAASG,IAAI,mBAAoB,OAAOF,EAAI,KAGrCnD,EAAEkD,GAASI,WAAW,0BAIhCN,EAAO,GAAGJ,UAnBI,CA+JgBnB,EAAIoB,IACrCA,OAMAJ,WAAYA,EACZH,UAAWA,EACXS,KALgBtB,EAAI8B,KAAK,IAMzBvB,SAAUA,IAIlBtB,KAAKoC,QAAU,SAAUU,EAAMtB,GAC3B,IAAIc,EAASQ,EAKb,OAJAxD,EAAEc,KAAKoB,EAAU,SAAU7C,EAAKoE,GAC5B,IAAIC,EAAK,IAAIC,OAAO,MAAQtE,EAAK,KACjC2D,EAASA,EAAOY,QAAQF,EAAID,KAEzBT,GAIX,IAAIZ,EAAW,WACX,WAAOlC,GAIP2D,EAAY,SAAUC,GACtB5D,EAAgB4D,GAIpBpD,KAAKqD,IAAM,SAAUC,QAGb5B,KACApC,EAAEG,GAAiB8D,MAAMD,GACzBhE,EAAEG,GAAiB+D,QAAQC,UAI3BnE,EAAEG,GAAiBiE,OAAOH,MAAMD,GAIpCK,EAA8BlE,IAIlC,IAiBIkE,EAAgC,SAAUC,GAC1CtE,EAAEsE,GAAUhB,WAAW,mBAG3B5C,KAAK6D,KAAO,SAAUhE,GAOlB,GALAC,EAAWE,KAvBK,SAAUK,GAEtBZ,IAAoBY,IAGxBZ,EAAkBY,EAClB8C,OANgB,CAwBFtD,EAAMQ,KAXbf,EAAEG,GAAiBqE,QAAU,KAeA,SAGpC,IAAIC,EAAajE,EAAMG,aAAaJ,EAAMK,MAEtC8D,EAAOlE,EAAM2B,SAASsC,GAGtBlE,EAAMoE,SAENpE,EAAMoE,QAAQ1G,KAAKyC,KAAMgE,GACd1E,EAAE,oBAAoB0E,EAAKjC,WAAW,KAAK+B,OACtDH,EAA8B,oBAAoBK,EAAKjC,WAAW,MAGlEjC,EAAMuD,IAAIW,EAAK3B,WAIfX,KAAsByB,OAO9BnD,KAAK6D,KAAKhE,IAGdP,EAAE4E,GAAGxE,KAAO,SAASkE,EAAU1D,EAAM+D,GACjC3E,EAAEI,KAAKhB,QACH2B,IAAKuD,EACL1D,KAAMA,EACN+D,QAASA,KA3TpB,CA+TEE","file":"jquery.cppy.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","(function ($) {\r\n\r\n    var global_version           = \"2.1.0\";\r\n    var global_org_template      = false; // 原始模板\r\n    var global_isinit            = false;\r\n    var global_selector          = false; // 選擇棄\r\n    $.cppy                       = {}\r\n\r\n    // 預先隱藏\r\n    $(\"head\").append(\"<style>[data-cppy-temp]{display:none}</style>\");\r\n\r\n    // 版本\r\n    $.cppy.version = function (){\r\n        return global_version;\r\n    }\r\n    \r\n\r\n    $.cppy.create = function (param){\r\n    \r\n        var _cppy;\r\n\r\n        // 平坦化使用的鍵名稱。命名具有繼承關聯\r\n        var _deep_key;\r\n\r\n        // 模板黏接的符號\r\n        var _glue = \"-\";\r\n\r\n        // 無論如何都轉為二維\r\n        this.prepare_data = function (data){\r\n            var obj = {};\r\n            $.each(data, function (key, ele){\r\n                // 二維\r\n                if ($.type(ele) === \"object\"){\r\n                    obj = data;\r\n                }\r\n                // 一維\r\n                else {\r\n                    obj[0] = data;\r\n                }\r\n                return false;\r\n            })\r\n            return obj;\r\n        }\r\n\r\n        var _switch_background = function (html){\r\n\r\n            var target = $(html);\r\n\r\n            target.find(\"[data-cppy-background]\").each(function (key, element){\r\n                \r\n                var url = $(element).attr(\"data-cppy-background\");\r\n\r\n                if ($(element)[0].tagName === \"IMG\") {\r\n                    $(element).attr(\"src\", url);\r\n                }\r\n                else {\r\n                    $(element).css(\"background-image\", \"url(\"+url+\")\")\r\n                }\r\n\r\n                var result = $(element).removeAttr('data-cppy-background');\r\n\r\n            })\r\n\r\n            return target[0].outerHTML;\r\n        }\r\n\r\n\r\n        var _deep_each_row = function (rowkey, row){\r\n            \r\n            // 複製一份提供最後還原\r\n            var _deep_key_clone = _deep_key;\r\n\r\n            // _deep_key 須要串接下去\r\n            _deep_key = _deep_key_name(rowkey);\r\n\r\n            $.each(row, function (cellkey, cell){\r\n\r\n                if ($.type(cell) === \"object\"){\r\n                    _deep_key = _deep_key_name(cellkey);\r\n                }\r\n                \r\n                row = _deep(row, cellkey, cell);\r\n            });\r\n\r\n            // 還原\r\n            _deep_key = _deep_key_clone;\r\n\r\n            return row;\r\n        }\r\n\r\n        /**\r\n         * 若不是物件\r\n         * @param   list       \r\n         * @param   key        \r\n         * @param   info       \r\n         * @param   delete_key 要刪除的 key\r\n         */\r\n        var _deep_is_val = function (list, key, info, delete_key){\r\n            var str = _deep_key_name(key)\r\n            list[str] = info;\r\n            delete list[delete_key];\r\n            return list;\r\n        }\r\n\r\n\r\n        // 深入\r\n        var _deep = function (list, key, info){\r\n\r\n            // 若 info 沒有物件，那返回 list\r\n            if ($.type(info) !== \"object\") {\r\n               return _deep_is_val(list, key, info, key);\r\n            }\r\n\r\n            // 若 info 是物件，批次取得\r\n            $.each(info, function (rowkey, row){\r\n\r\n                // 若欄位是物件\r\n                if ($.type(row) === \"object\") {\r\n\r\n                    // 建立新物件\r\n                    var box = _deep_each_row(rowkey, row);\r\n                    \r\n                    // 刪除物件\r\n                    delete list[key];\r\n\r\n\r\n                    // // 刪除這個項目, 並擴充多筆 row\r\n                    $.extend(list, box);\r\n                }\r\n\r\n                // 若欄位不是物件，是字或數字\r\n                else {\r\n\r\n                    list = _deep_is_val(list, rowkey, row, key);\r\n                }\r\n            });\r\n\r\n            // console.log(list);\r\n\r\n            return list;\r\n        }\r\n\r\n        // 設定 _deep_key 名稱\r\n        var _deep_key_name = function (name){\r\n            // \"-&gt;\"\r\n            return _deep_key + _glue + name;\r\n        }\r\n\r\n        // 設定 _deep_key 原始名稱\r\n        var _deep_key_root = function (name){\r\n            _deep_key = name; // 指定 _deep_key 源頭名稱\r\n        }\r\n\r\n        // 平坦化：將二維以上的物件平坦至二維\r\n        this.flatten = function (datalist){\r\n\r\n            // 批次取得一維\r\n            $.each(datalist, function (lkey, datainfo){\r\n\r\n                // 取得一維中的每個項目\r\n                $.each(datainfo, function (rowkey, row){\r\n\r\n                    // 若底下沒物件，不處理\r\n                    if ($.type(row) !== \"object\") return true;\r\n\r\n                    // 若是物件 \r\n                    _deep_key_root(rowkey); // 設定 _deep_key 源頭名稱\r\n\r\n                    // 深入判斷是否底下有物件，並組合\r\n                    datainfo = _deep(datainfo, rowkey, row);\r\n                });\r\n\r\n            });\r\n\r\n            // console.log('\\n\\n\\n\\n');\r\n            // console.table(datalist);\r\n            return datalist;\r\n        }\r\n\r\n        // 模板處理\r\n        this.template = function (datalist){\r\n\r\n            // 多維轉二維\r\n            datalist = this.flatten(datalist);\r\n\r\n            // 第一次?\r\n            if (_is_init() === false){\r\n                global_org_template = $(global_selector).clone()[0];\r\n            }\r\n            \r\n            var timestamp = new Date().getTime(); // 時間戳記\r\n            var cppy_class = \"cppy-\" + timestamp; // 類別\r\n\r\n            $(global_org_template).attr(\"data-cppy-class\", cppy_class)\r\n            var template_html = global_org_template.outerHTML;\r\n\r\n\r\n            var box    = [];\r\n            var boxkey = 0;\r\n            \r\n            // 批次替換後合併。 如 {id: 100} ，會把 $id 替換為 100\r\n            $.each(datalist, function (key, datainfo){\r\n                box[boxkey] = _cppy.key2val(template_html, datainfo);\r\n                box[boxkey] = _switch_background(box[boxkey]);\r\n                boxkey++;\r\n            })\r\n\r\n            var mix_html_code = box.join('');\r\n\r\n            return {\r\n                cppy_class: cppy_class,\r\n                timestamp: timestamp,\r\n                html: mix_html_code,\r\n                datalist: datalist\r\n            };\r\n        }\r\n\r\n        this.key2val = function (code, datainfo){\r\n            var target = code;\r\n            $.each(datainfo, function (key, val){\r\n                var re = new RegExp(\"\\\\$\" + key, \"g\");\r\n                target = target.replace(re, val)\r\n            })\r\n            return target;\r\n        }\r\n\r\n        // 初始化?\r\n        var _is_init = function (){\r\n            return global_isinit === true;\r\n        }\r\n\r\n        // 設定初始標記\r\n        var _set_init = function (bool){\r\n            global_isinit = bool;\r\n        }\r\n\r\n        // 將新的編碼換置原來的模板位置\r\n        this.put = function (newcode){\r\n\r\n            //第一次，就加入模板後方，並將模板移除\r\n            if (_is_init() === false) {\r\n                $(global_selector).after(newcode);\r\n                $(global_selector).first().remove();\r\n            }\r\n            //第二次以後，在所有元素的後方加入\r\n            else {\r\n                $(global_selector).last().after(newcode)\r\n            }\r\n\r\n            // 顯示\r\n            _display_cppy_result_template(global_selector)\r\n        }\r\n\r\n        // 指派選擇器\r\n        var _set_selector = function (ele){\r\n\r\n            if (global_selector === ele) return false;\r\n            \r\n            // 若是新的選擇器，需要將重設初始化標記\r\n            global_selector = ele;\r\n            _set_init(false);\r\n\r\n            return true;\r\n        }\r\n\r\n        // 目標存在？\r\n        var _is_exist_selector = function (){\r\n            return $(global_selector).length >= 0;\r\n        }\r\n\r\n        // 顯示複製後的成果\r\n        var _display_cppy_result_template = function (selector){\r\n            $(selector).removeAttr('data-cppy-temp')\r\n        }\r\n\r\n        this.main = function (param){\r\n\r\n            _cppy    = this;\r\n            _set_selector(param.ele);\r\n\r\n\r\n            // 忽略不存在\r\n            if (_is_exist_selector() === false) return false;\r\n\r\n            // 無論如何都轉為二維\r\n            var input_data = _cppy.prepare_data(param.data);\r\n\r\n            var temp = _cppy.template(input_data);\r\n\r\n            // \r\n            if (param.success) {\r\n                // console.log(temp)\r\n                param.success.call(this, temp);\r\n                var leng = $(\"[data-cppy-class=\"+temp.cppy_class+\"]\").length;\r\n                _display_cppy_result_template(\"[data-cppy-class=\"+temp.cppy_class+\"]\")\r\n            }\r\n            else {\r\n                _cppy.put(temp.html);\r\n            }\r\n\r\n            // 初始化標記\r\n            if (_is_init() === false) _set_init(true);\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n        this.main(param);\r\n    }\r\n    \r\n    $.fn.cppy = function(selector, data, success) {\r\n        $.cppy.create({\r\n            ele: selector,\r\n            data: data,\r\n            success: success\r\n        })\r\n    };\r\n\r\n}( jQuery ));\r\n"],"sourceRoot":""}